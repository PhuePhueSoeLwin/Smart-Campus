/* ===== Theme tokens ===== */
:root{
  --bg-1: radial-gradient(1100px 500px at 50% -180px, rgba(77,174,244,.08), transparent 60%);
  --bg-2: linear-gradient(180deg, #0b1326, #0a1020 40%, #0b1326);

  --text: #e7eeff;
  --muted:#afbdd7;
  --panel-b:#254d7a66;
  --divider:#ffffff14;

  --card-1: rgba(255,255,255,.08);
  --card-2: rgba(255,255,255,.04);

  --ok:#16d6a3;
  --off:#ff7a7a;
  --accent:#8ad0ff;

  --pill: rgba(255,255,255,.07);
  --pill-b:#ffffff24;

  --input-bg: rgba(255,255,255,.08);
  --input-b: #5aa9ff5c;

  --osd-bg: rgba(0,0,0,.62);
  --osd-t: #e7eeff;
  --osd-red: #ff3b3b;

  --shadow: 0 8px 20px rgba(0,0,0,.18);
}
.theme-light{
  --bg-1: radial-gradient(1100px 500px at 50% -180px, rgba(46,144,255,.06), transparent 60%);
  --bg-2: linear-gradient(180deg, #edf2ff, #f7faff 50%, #edf2ff);

  --text:#0b1a2e;
  --muted:#3a516f;
  --panel-b:#2c569566;
  --divider:#00000012;

  --card-1: #ffffff;
  --card-2: #f5f7ff;

  --ok:#10b981;
  --off:#e05252;
  --accent:#2e90ff;

  --pill:#ffffff;
  --pill-b:#00000012;

  --input-bg:#ffffff;
  --input-b:#2e90ff5c;

  --osd-bg: rgba(255,255,255,.86);
  --osd-t:#0b1a2e;
  --osd-red:#e11d48;

  --shadow: 0 8px 18px rgba(0,0,0,.12);
}

/* ===== Shell ===== */
.cctv-page{position:fixed; inset:0; background:var(--bg-1), var(--bg-2); color:var(--text); font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; display:grid; grid-template-rows:auto auto auto 1fr; overflow:hidden;}
.topbar{display:grid; grid-template-columns:140px 1fr 360px; align-items:center; gap:12px; padding:12px 20px; border-bottom:1px solid var(--divider); backdrop-filter:blur(8px) saturate(140%);}
.btn-back{justify-self:start; padding:8px 14px; border-radius:10px; border:1px solid #5aa9ff66; background:linear-gradient(180deg,#5aa9ff33,#5aa9ff1a); color:var(--text); font-weight:700; cursor:pointer; box-shadow:var(--shadow);}
.brand{justify-self:center; display:flex; align-items:center; gap:10px;}
.logo{height:38px; object-fit:contain;}
.title{font-weight:900; letter-spacing:.2px;}
.badge{padding:4px 8px; border-radius:999px; background:var(--accent); color:#08243f; font-weight:900; font-size:11px;}
.top-actions{justify-self:end; display:flex; align-items:center; gap:12px;}
.switch-label{font-size:12px; color:var(--muted); font-weight:800; opacity:.85;}

/* Segmented control (only per-building) */
.seg{display:inline-flex; border:1px solid #ffffff24; background:#ffffff12; border-radius:999px; padding:3px; gap:3px;}
.seg-btn{padding:6px 12px; border-radius:999px; border:none; background:transparent; color:var(--muted); font-weight:800; cursor:pointer;}
.seg-btn.active{background:linear-gradient(90deg,#2e90ff,#12d1b8); color:#fff;}
.seg-btn:focus-visible{outline:2px solid #8ad0ff; outline-offset:2px;}

.switch{position:relative; display:inline-block; width:52px; height:28px; vertical-align:middle;}
.switch input{opacity:0;width:0;height:0;}
.slider{position:absolute; inset:0; cursor:pointer; background:#ffffff33; border:1px solid #ffffff44; border-radius:999px; transition:.2s;}
.slider:before{content:""; position:absolute; width:22px; height:22px; left:3px; top:50%; transform:translateY(-50%); background:#fff; border-radius:50%; transition:.2s;}
.switch input:checked + .slider{background:linear-gradient(90deg,#2e90ff,#12d1b8); border-color:transparent;}
.switch input:checked + .slider:before{transform:translate(24px,-50%);}

/* ===== KPIs ===== */
.kpis{display:grid; grid-template-columns:repeat(6,minmax(130px,1fr)); gap:10px; padding:12px 20px 6px; border-bottom:1px solid var(--divider);}
.kpi{background:linear-gradient(180deg,var(--card-1),var(--card-2)); border:1px solid var(--panel-b); border-radius:12px; padding:10px; box-shadow:var(--shadow); color:var(--text);}
.kpi.ok{border-color: #11b78f66;} .kpi.off{border-color:#ff7a7a66;} .kpi.people{border-color:#5aa9ff66;} .kpi.uptime{border-color:#ffd66a66;}
.kpi-l{font-size:11px; color:var(--muted); margin-bottom:2px;} .kpi-v{font-size:18px; font-weight:900;}
@media (max-width:960px){.kpis{grid-template-columns:repeat(3,minmax(130px,1fr));}}
@media (max-width:600px){.kpis{grid-template-columns:repeat(2,minmax(130px,1fr));}}

/* ===== Filters ===== */
.filters{
  display:grid;
  grid-template-columns: minmax(320px, 1fr) auto;
  align-items:center;
  gap:12px;
  padding:10px 20px;
  border-bottom:1px solid var(--divider);
}
.search{display:flex; justify-content:center;}
.search input{
  width:100%;
  max-width: 860px;
  padding:10px 12px;
  border-radius:10px;
  border:1px solid var(--input-b);
  background:var(--input-bg);
  color:var(--text);
  outline:none;
}
.search input::placeholder{color:var(--muted);}
.filter-right{display:flex; align-items:center; gap:10px; justify-self:end;}
.filter-right select,.btn-ghost{padding:10px 12px; border-radius:10px; border:1px solid #ffffff2e; background:var(--pill); color:var(--text); cursor:pointer;}
.btn-ghost{font-weight:800;}
@media (max-width: 1024px){
  .filters{grid-template-columns: 1fr;}
  .filter-right{justify-self:stretch; justify-content:flex-end; flex-wrap:wrap;}
}

/* ===== Buildings grid ===== */
.bld-grid{padding:14px 20px 28px; overflow:auto; display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:14px;}
.bld-card{text-align:left; padding:12px; border-radius:12px; border:1px solid #ffffff1c; background:linear-gradient(180deg,var(--card-1),var(--card-2)); box-shadow:var(--shadow); display:grid; gap:10px; cursor:pointer; color:var(--text);}
.bld-card:hover{filter:brightness(1.03);}
.bld-h{display:flex; align-items:center; gap:8px; font-weight:900;}
.bld-ico{display:grid; place-items:center; width:26px; height:26px; border-radius:8px; border:1px solid var(--input-b); color:var(--accent); background:linear-gradient(180deg,#5aa9ff33,#5aa9ff1a);}
.bld-code{font-size:14px; letter-spacing:.2px;}
.bld-row{display:flex; gap:6px; flex-wrap:wrap;}
.tag{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; background:var(--pill); border:1px solid var(--pill-b); font-weight:800; font-size:12px; color:var(--text);}
.tag.ok{color:var(--ok);} .tag.off{color:var(--off);}
.bld-bar{height:6px; border-radius:999px; background:#ffffff14; overflow:hidden; border:1px solid var(--panel-b);}
.bld-bar-fill{height:100%; background:linear-gradient(90deg,var(--accent),#12d1b8);}
.bld-bar-meta{font-size:11px; color:var(--muted); margin-top:6px;}

/* ===== Cameras ===== */
.bld-summary{padding:10px 20px 0; display:flex; gap:8px; flex-wrap:wrap; align-items:center;}
.cam-grid{padding:14px 20px 28px; overflow:auto; display:grid; grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:14px;}

/* Tile common (16:9) */
.tile{
  position:relative;
  aspect-ratio:16 / 9;
  min-height:200px;
  border:1px solid #ffffff1c;
  border-radius:12px;
  background:linear-gradient(180deg,var(--card-1),var(--card-2));
  box-shadow:var(--shadow);
  overflow:hidden;
}
.tile:focus-visible{outline:2px solid #8ad0ff; outline-offset:2px;}
.tile-head{position:absolute; top:10px; right:10px; z-index:3;}
.pill, .pill-lite, .tag{font-size:12px; line-height:1;}
.pill{display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--pill-b); background:var(--pill); font-weight:900; color:var(--text);}
.pill-live{background:var(--accent); color:#08243f; border-color:#5aa9ff80;}
.pill-off{background:#ff5151; color:#fff; border-color:#ff515180;}

/* ===== NORMAL MODE ===== */
.tile-normal{
  background:
    radial-gradient(600px 220px at 50% -80px, rgba(138,208,255,.12), transparent 60%),
    linear-gradient(180deg, #0e1728, #0b1222);
}
.theme-light .tile-normal{
  background:
    radial-gradient(600px 220px at 50% -80px, rgba(46,144,255,.12), transparent 60%),
    linear-gradient(180deg, #f7fbff, #edf4ff);
}
.osd-clock{
  position:absolute; left:10px; top:10px; z-index:2;
  font: 600 12px ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
  color:var(--muted);
  background:rgba(0,0,0,.28);
  border:1px solid #ffffff28;
  padding:3px 6px; border-radius:6px;
}
.theme-light .osd-clock{background:rgba(255,255,255,.6)}

.name-box{
  position:absolute; left:10px; right:10px; bottom:44px; z-index:2;
  display:flex; justify-content:space-between; align-items:center; gap:8px;
  color:var(--text); background:var(--osd-bg); border:1px solid #ffffff22; border-radius:10px; padding:8px 10px;
}
.theme-light .name-box{background:var(--osd-bg);}
.cam-name{font-weight:900; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.cam-sub{font-size:12px; color:var(--muted); white-space:nowrap; margin-left:auto;}
.spec-ribbon{
  position:absolute; left:0; right:0; bottom:0; z-index:2;
  display:flex; align-items:center; gap:8px; padding:8px 10px;
  background:rgba(8,12,20,.75); color:#e9eefb; border-top:1px solid #ffffff22;
  font: 700 12px ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
}
.theme-light .spec-ribbon{background:rgba(255,255,255,.82); color:#0b1a2e;}
.tag-rec{padding:2px 6px; border-radius:4px; font-weight:900; letter-spacing:.02em;}
.tag-rec.on{background:#ff3b3b; color:#fff;}
.tag-rec.off{background:#444; color:#fff;}
.spec{opacity:.95}

/* ===== KEEP EYES MODE ===== */
.cam-grid.eyes-on .tile{margin-bottom:2px;}
.tile-eyes .tile-eyes-media{position:absolute; inset:0; background:#000; display:grid; place-items:center;}
.eyes-video,.eyes-yt{width:100%; height:100%; object-fit:cover; display:block; border:0; background:#000;}
/* CCTV skin for YT: no interactions = no YT chrome */
.yt-skin iframe{pointer-events:none !important;}
.no-signal{position:absolute; inset:0; display:grid; place-items:center; background:#111; color:#fff; font-weight:900; letter-spacing:.12em;}
.pill-lite{position:absolute; top:8px; right:8px; z-index:2; padding:6px 10px; border-radius:999px; font-weight:900; border:1px solid var(--pill-b);}
.pill-lite.on{background:var(--accent); color:#08243f; border-color:#5aa9ff80;}
.pill-lite.off{background:#ff5151; color:#fff; border-color:#ff515180;}

.tile-eyes-footer{position:absolute; left:0; right:0; bottom:0; min-height:40px; display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px; padding:8px 10px; background:var(--osd-bg); color:var(--osd-t); border-top:1px solid #ffffff20;}
.mini-left{display:flex; gap:6px; align-items:center; min-width:0;}
.mini-id{font-weight:900;}
.mini-zone{opacity:.9; white-space:nowrap; overflow:hidden; text-overflow:ellipsis;}
.mini-dot{opacity:.6;}
.mini-status.ok{color:var(--ok); font-weight:900;}
.mini-status.off{color:#ffd4d4; font-weight:900;}

/* ===== Empty ===== */
.empty{grid-column:1/-1; padding:40px 0; text-align:center; color:var(--muted); font-weight:800;}

/* ===== Player ===== */
.player{position:fixed; inset:0; z-index:4000; display:grid; place-items:center;}
.backdrop{position:absolute; inset:0; background:rgba(6,12,24,.6); backdrop-filter:blur(4px);}
.sheet{position:relative; z-index:1; width:min(1140px,94vw); border-radius:16px; border:1px solid var(--panel-b); background:linear-gradient(180deg,var(--card-1),var(--card-2)); box-shadow:0 20px 48px rgba(0,0,0,.32); display:grid; grid-template-rows:auto minmax(56vh,72vh); overflow:hidden;}
.sheet-head{display:grid; grid-template-columns:1fr auto; align-items:center; gap:8px; padding:10px 12px; border-bottom:1px solid var(--divider);}
.ph-left{display:flex; align-items:center; gap:10px;}
.ph-title .n{font-weight:900;}
.ph-title .s{display:flex; gap:6px; align-items:center; color:var(--muted); font-size:12px;}
.ph-title .s .t.ok{color:var(--ok);} .ph-title .s .t.off{color:var(--off);}
.ph-title .s .dot{opacity:.5;}
.btn-x{width:28px; height:28px; border-radius:8px; border:1px solid #ffffff2a; background:rgba(255,255,255,.08); color:var(--text); font-size:18px; cursor:pointer;}

.stage{position:relative; background:#000; display:grid; place-items:center; overflow:hidden;}
.stage.offline{background:radial-gradient(600px 240px at 50% -20%, rgba(255,114,114,.18), transparent 60%), #170f14;}
.media{width:100%; height:100%; display:block; object-fit:contain; background:#000; border:0;}
.media-yt{position:absolute; inset:0;} /* wrapper for yt-skin */

.osd-top, .osd-bottom{
  position:absolute; left:8px; right:8px; display:flex; align-items:center; gap:10px; justify-content:space-between; color:var(--osd-t); font-weight:800; font-size:12px; letter-spacing:.01em;
  font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
}
.osd-top{top:8px;} .osd-bottom{bottom:8px;}
.osd-top .rec{background:var(--osd-red); color:#fff; padding:2px 6px; border-radius:4px; animation:blink 1s steps(2,end) infinite;}
.osd-top .ch{padding:2px 6px; border-radius:4px; border:1px solid #ffffff30; background:#ffffff12;}
.osd-top .meta{opacity:.9;}
.osd-bottom .loc{padding:2px 6px; border-radius:4px; border:1px solid #ffffff30; background:#ffffff12;}
.osd-bottom .clock{opacity:.9;}

.controls{position:absolute; left:0; right:0; bottom:0; background:linear-gradient(180deg, rgba(0,0,0,0) 0, rgba(0,0,0,.55) 60%, rgba(0,0,0,.75) 100%); padding:10px 10px 12px; display:grid; gap:8px;}
.controls.yt{background:linear-gradient(180deg, rgba(0,0,0,0) 0, rgba(0,0,0,.5) 70%, rgba(0,0,0,.7) 100%);}
.row{display:flex; align-items:center; gap:8px;}
.ic{width:38px; height:38px; border-radius:10px; border:1px solid #ffffff30; background:rgba(0,0,0,.55); color:#fff; display:grid; place-items:center; cursor:pointer;}
.ic:focus-visible{outline:2px solid #8ad0ff; outline-offset:2px;}
.vol{width:140px;}
.time{font-size:12px; color:#e7e7e7;}
.flex{flex:1;}
.seek{-webkit-appearance:none; appearance:none; height:8px; border-radius:999px; background:#ffffff2a;}
.seek::-webkit-slider-thumb{-webkit-appearance:none; width:16px; height:16px; border-radius:50%; background:#fff; border:2px solid #5aa9ff; box-shadow:0 0 0 4px #5aa9ff33;}
@keyframes blink{50%{opacity:.25}}

/* ===== Mobile ===== */
@media (max-width: 520px){
  .topbar{grid-template-columns:100px 1fr 220px;}
  .cam-grid { grid-template-columns: 1fr; }
  .tile     { aspect-ratio: 16/9; min-height: 180px; }
}
